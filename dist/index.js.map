{"version":3,"sources":["../src/index.js"],"names":["require","_","config","server_config","store","get","type","connect","Parser","process","startUp","app","logger","connection","log","host","port","name","start","error","innerError","toString","exit"],"mappings":";;;;;;;;;;AAAAA,QAAQ,QAAR;AACA,IAAMC,IAAED,QAAQ,QAAR,CAAR;AACA,IAAME,SAAOC,iBAAeH,QAAQ,iBAAR,CAA5B;AACA,IAAMI,QAAMH,EAAEI,GAAF,CAAMH,MAAN,EAAa,eAAb,EAA6B,IAA7B,CAAZ;AACA,IAAMI,OAAKL,EAAEI,GAAF,CAAMH,MAAN,EAAa,cAAb,EAA4B,IAA5B,CAAX;AACA,IAAMK,UAAQP,QAAQ,MAAR,CAAd;;eACeA,QAAQ,WAAR,C;IAARQ,M,YAAAA,M;;AACP,IAAMC,UAAQT,QAAQ,SAAR,CAAd;AACA,IAAMU,UAAQV,QAAQ,mBAAR,CAAd;AACA,IAAMW,MAAIX,QAAQ,OAAR,CAAV;AACA,IAAIY,SAAO,EAAX;AACAJ,OAAOI,MAAP,EAAc,UAAd,EAAyB,EAACR,YAAD,EAAOE,UAAP,EAAzB;AACA,2DAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,0BAEUF,UAAQ,IAFlB;AAAA;AAAA;AAAA;;AAAA;AAAA,2BAGoCG,SAHpC;;AAAA;AAGiBM,8BAHjB;;AAIWD,2BAAOE,GAAP,CAAW,YAAX,EAAyB,EAACC,MAAKF,WAAWE,IAAjB,EAAuBC,MAAKH,WAAWG,IAAvC,EAA6CC,MAAKJ,WAAWI,IAA7D,EAAzB;;AAJX;AAAA;AAAA,2BAMc,IAAIP,OAAJ,EAAD,CAAgBQ,KAAhB,EANb;;AAAA;AAAA,0BAOUZ,SAAO,IAPjB;AAAA;AAAA;AAAA;;AAAA;AAAA,2BAQiBK,KARjB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAWOC,2BAAOO,KAAP,CAAa,MAAb,EAAoB,EAACC,YAAW,YAAMC,QAAN,EAAZ,EAApB;AACAZ,4BAAQa,IAAR,CAAa,CAAC,CAAd;;AAZP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAD","file":"index.js","sourcesContent":["require('./init');\r\nconst _=require('lodash');\r\nconst config=server_config||require('./config/config');\r\nconst store=_.get(config,\"runMode.store\",\"db\");\r\nconst type=_.get(config,\"runMode.type\",\"BS\");\r\nconst connect=require('./db');\r\nconst {Parser}=require('./log/log');\r\nconst process=require('process');\r\nconst startUp=require('./servers/startup');\r\nconst app=require('./app');\r\nlet logger={};\r\nParser(logger,'index.js',{store,type});\r\n(async ()=>{\r\n    try {\r\n        if(store==='db') {\r\n            const connection = await connect();\r\n            logger.log('MongoDB已连接', {host:connection.host, port:connection.port, name:connection.name});\r\n        }\r\n        await (new startUp()).start();\r\n        if(type==='BS'){\r\n            await app();\r\n        }\r\n    }catch (error) {\r\n        logger.error('启动失败',{innerError:error.toString()});\r\n        process.exit(-1);\r\n    }\r\n})();"]}