{"version":3,"sources":["../../src/ipcs/ipc_addin.js"],"names":["dh","require","onvif","_508","_","integration","AddIn","brand","name","fnCreateInstance","protocol","createInstance","options","cls","exports","module","regIPCBrand","extend","ptz"],"mappings":";;;;;;AAAA;;;;AAIA,IAAMA,KAAGC,QAAQ,gBAAR,CAAT;AACA,IAAMC,QAAMD,QAAQ,mBAAR,CAAZ;AACA,IAAME,OAAKF,QAAQ,iBAAR,CAAX;AACA,IAAMG,IAAEH,QAAQ,QAAR,CAAR;AACA,IAAMI,cAAYJ,QAAQ,wBAAR,CAAlB;;IAEMK,K;AACF,qBAAa;AAAA;;AACT,aAAKC,KAAL,GAAW,EAAX;AACA;;;;AAIH;;;;oCAEWA,K,EAAMC,I,EAAKC,gB,EAAiB;AACpC,iBAAKF,KAAL,CAAWA,KAAX,IAAkB;AACdG,0BAASH,KADK;AAEdC,sBAAKA,IAFS;AAGdG,gCAAeF;AAHD,aAAlB;AAKH;;;uCAEcG,O,EAAQ;AACnB,gBAAIC,MAAI,KAAKN,KAAL,CAAWK,QAAQL,KAAnB,CAAR;AACA,gBAAG,CAACM,GAAJ,EAAS,OAAO,IAAP;AACT,mBAAOA,IAAIF,cAAJ,CAAmBC,OAAnB,CAAP;AACH;AACL;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DAE,UAAQC,OAAOD,OAAP,GAAe,IAAIR,KAAJ,EAAvB;;AAEAQ,QAAQE,WAAR,CAAoB,OAApB,EAA4B,IAA5B,EAAiC,UAACJ,OAAD,EAAW;AACxC,WAAO,IAAIZ,EAAJ,CAAOY,OAAP,CAAP;AACH,CAFD;AAGAE,QAAQE,WAAR,CAAoB,UAApB,EAA+B,MAA/B,EAAsC,UAACJ,OAAD,EAAW;AAC7C,WAAO,IAAIV,KAAJ,CAAUU,OAAV,CAAP;AACH,CAFD;AAGAE,QAAQE,WAAR,CAAoB,WAApB,EAAgC,MAAhC,EAAuC,UAACJ,OAAD,EAAW;AAC9C,WAAO,IAAIV,KAAJ,CAAUU,OAAV,CAAP;AACH,CAFD;AAGAE,QAAQE,WAAR,CAAoB,KAApB,EAA0B,aAA1B,EAAwC,UAACJ,OAAD,EAAW;AAC/C,WAAOP,YAAYH,KAAZ,EAAkBU,OAAlB,EAA0BT,IAA1B,EAA+BC,EAAEa,MAAF,CAAS,EAAT,EAAYL,OAAZ,EAAoBA,QAAQM,GAA5B,CAA/B,CAAP;AACH,CAFD;AAGAJ,QAAQE,WAAR,CAAoB,OAApB,EAA4B,SAA5B,EAAsC,UAACJ,OAAD,EAAW;AAC7C,WAAO,IAAIV,KAAJ,CAAUU,OAAV,CAAP;AACH,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA","file":"ipc_addin.js","sourcesContent":["/**\r\n * Created by Luky on 2017/7/6.\r\n */\r\n\r\nconst dh=require('./dahua/dh_ipc');\r\nconst onvif=require('./onvif/onvif_ipc');\r\nconst _508=require('./_508/_508_ptz');\r\nconst _=require('lodash');\r\nconst integration=require('./base/ipc_Integration');\r\n\r\nclass AddIn{\r\n    constructor(){\r\n        this.brand={};\r\n        /*this.ptz_component={};\r\n        this.video_component={};\r\n        this.audio_component={};\r\n        this.alarm_component={};*/\r\n    }\r\n\r\n    regIPCBrand(brand,name,fnCreateInstance){\r\n        this.brand[brand]={\r\n            protocol:brand,\r\n            name:name,\r\n            createInstance:fnCreateInstance\r\n        };\r\n    }\r\n\r\n    createInstance(options){\r\n        let cls=this.brand[options.brand];\r\n        if(!cls) return null;\r\n        return cls.createInstance(options);\r\n    }\r\n/*\r\n    regPTZComponent(protocol,name,cls){\r\n        this.ptz_component[protocol]={\r\n            protocol:protocol,\r\n            name:name,\r\n            cls:cls\r\n        };\r\n    }\r\n\r\n    regVedioComponent(protocol,name,cls){\r\n        this.video_component[protocol]={\r\n            protocol:protocol,\r\n            name:name,\r\n            cls:cls\r\n        };\r\n    }\r\n\r\n    regAudioComponent(protocol,name,cls){\r\n        this.audio_component[protocol]={\r\n            protocol:protocol,\r\n            name:name,\r\n            cls:cls\r\n        };\r\n    }\r\n\r\n    regAudioComponent(protocol,name,cls){\r\n        this.alarm_component[protocol]={\r\n            protocol:protocol,\r\n            name:name,\r\n            cls:cls\r\n        };\r\n    }\r\n\r\n    _getProtocolOf(collect){\r\n        let ret=[];\r\n        _.forEach(collect,(value,key)=>{\r\n            ret.push({\r\n                en:key,\r\n                cn:value.name,\r\n                protocol:value.protocol\r\n            });\r\n        });\r\n        return ret;\r\n    }\r\n\r\n    getBrands(){\r\n        return this._getProtocolOf(this.brand);\r\n    }\r\n\r\n    getVedioProtocol(){\r\n        return this._getProtocolOf(this.video_component);\r\n    }\r\n\r\n    getPTZProtocol(){\r\n        return this._getProtocolOf(this.ptz_component);\r\n    }\r\n    getAudioProtocol(){\r\n        return this._getProtocolOf(this.audio_component);\r\n    }*/\r\n}\r\n\r\nexports=module.exports=new AddIn();\r\n\r\nexports.regIPCBrand('dahua','大华',(options)=>{\r\n    return new dh(options);\r\n});\r\nexports.regIPCBrand('hopewell','和普威尔',(options)=>{\r\n    return new onvif(options);\r\n});\r\nexports.regIPCBrand('hikvision','海康威视',(options)=>{\r\n    return new onvif(options);\r\n});\r\nexports.regIPCBrand('508','国营508集成海康威视',(options)=>{\r\n    return integration(onvif,options,_508,_.extend({},options,options.ptz));\r\n});\r\nexports.regIPCBrand('onvif','onvif协议',(options)=>{\r\n    return new onvif(options);\r\n});\r\n//exports.regVedioComponent('dahua','大华私有协议',dh);\r\n//exports.regVedioComponent('onvif','onvif标准协议',onvif);\r\n//exports.regPTZComponent('onvif','onvif标准协议',onvif);\r\n//exports.regPTZComponent('dahua','大华转台协议',dh);\r\n//exports.regPTZComponent('508','508长转台协议',_508);\r\n//exports.regAudioComponent('dahua','大华音频对讲协议',dh);"]}