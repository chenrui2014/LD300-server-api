{"version":3,"sources":["../../../src/test/host/virtual_host.test.js"],"names":["VirtualHost","require","_","run","ports","done","forEach","port","vh","start","then","l","send","CMD","normal","catch","setInterval","describe","it"],"mappings":";;AAAA,IAAMA,cAAYC,QAAQ,yBAAR,CAAlB;AACA,IAAMC,IAAED,QAAQ,QAAR,CAAR;;AAEA,SAASE,GAAT,CAAaC,KAAb,EAAmBC,IAAnB,EAAyB;AACrBH,MAAEI,OAAF,CAAUF,KAAV,EAAgB,UAACG,IAAD,EAAQ;AACpB,YAAIC,KAAG,IAAIR,WAAJ,CAAgBO,IAAhB,CAAP;AACR;;;;;AAKA;;;;;;AAMQC,WAAGC,KAAH,GAAWC,IAAX,CAAgB,YAAI;AAChB,gBAAIC,IAAE,SAAFA,CAAE,GAAI;AACNH,mBAAGI,IAAH,CAAQZ,YAAYa,GAAZ,CAAgBC,MAAxB;AACD;;;;AAIF,aAND;AAOAH;AACH,SATD,EASGI,KATH,CASSV,IATT;AAUH,KAvBD;AAwBAW,gBAAY,YAAI;AACZX;AACH,KAFD,EAEE,OAFF;AAGH;;AAEDY,SAAS,KAAT,EAAe,YAAI;AACfC,OAAG,QAAH,EAAY,UAACb,IAAD,EAAQ;AAChBF,YAAI,CAAC,CAAD,CAAJ,EAAQE,IAAR;AACH,KAFD;AAGAa,OAAG,oBAAH,EAAwB,UAACb,IAAD,EAAQ;AAC5BF,YAAI,CAAC,CAAD,EAAG,CAAH,CAAJ,EAAUE,IAAV;AACH,KAFD;;AAIAa,OAAG,oBAAH,EAAwB,UAACb,IAAD,EAAQ;AAC5BF,YAAI,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,CAAJ,EAAcE,IAAd;AACH,KAFD;AAGH,CAXD","file":"virtual_host.test.js","sourcesContent":["const VirtualHost=require('../../host/virtual_host');\r\nconst _=require('lodash');\r\n\r\nfunction run(ports,done) {\r\n    _.forEach(ports,(port)=>{\r\n        let vh=new VirtualHost(port);\r\n/*        vh.on('reset',()=>{\r\n            setTimeout(()=>{\r\n                vh.send(VirtualHost.CMD.alarm,10);\r\n            },2000);\r\n        });*/\r\n/*        vh.start().then(()=>{\r\n            vh.send(VirtualHost.CMD.normal);\r\n            setTimeout(()=>{\r\n                vh.send(VirtualHost.CMD.alarm,10);\r\n            },5000);\r\n        }).catch(done);*/\r\n        vh.start().then(()=>{\r\n            let l=()=>{\r\n                vh.send(VirtualHost.CMD.normal);\r\n               /* setTimeout(()=>{\r\n                    vh.send(VirtualHost.CMD.alarm,10);\r\n                    //setTimeout(l,3000);\r\n                },3000);*/\r\n            };\r\n            l();\r\n        }).catch(done);\r\n    });\r\n    setInterval(()=>{\r\n        done;\r\n    },2000033);\r\n}\r\n\r\ndescribe('xxx',()=>{\r\n    it('启动一台主机',(done)=>{\r\n        run([1],done);\r\n    });\r\n    it('启动两台主机，并同一时间报警统一位置',(done)=>{\r\n        run([1,3],done);\r\n    });\r\n\r\n    it('启动四台主机，并同一时间报警统一位置',(done)=>{\r\n        run([2,4,6,8],done);\r\n    });\r\n});"]}