{"version":3,"sources":["../../../../src/test/live/server/live_server.js"],"names":["require","live","fs","IPCFactory","http","wOption","flags","encoding","fd","mode","autoClose","server","createServer","listen","describe","id","done","getIPC","ipc","l","openWSS","on","dolive","it","xit"],"mappings":";;;;;;;;;;AAAA;;;AAGAA,QAAQ,qBAAR;AACA,IAAIC,OAAKD,QAAQ,sCAAR,CAAT;AACA,IAAIE,KAAGF,QAAQ,IAAR,CAAP;AACA,IAAIG,aAAWH,QAAQ,kCAAR,CAAf;;AAEA,IAAMI,OAAOJ,QAAQ,MAAR,CAAb;AACA,IAAMK,UAAU;AACZC,WAAO,GADK;AAEZC,cAAU,IAFE;AAGZC,QAAI,IAHQ;AAIZC,UAAM,GAJM;AAKZC,eAAW;AALC,CAAhB;;AAQA,IAAIC,SAAOP,KAAKQ,YAAL,EAAX;AACAD,OAAOE,MAAP,CAAc,IAAd;;AAEAC,SAAS,MAAT,EAAgB,YAAI;AAAA;AAAA,8EAEjB,iBAAsBC,EAAtB,EAAyBC,IAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCACmBb,WAAWc,MAAX,CAAkBF,EAAlB,CADnB;;AAAA;AACSG,+BADT;AAESC,6BAFT,GAEW,IAAIlB,IAAJ,CAASU,MAAT,EAAgBO,GAAhB,CAFX;;AAGKC,8BAAEC,OAAF;AACAD,8BAAEE,EAAF,CAAK,OAAL,EAAa,YAAI;AACbL;AACH,6BAFD;;AAJL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAFiB;;AAAA,wBAEFM,MAFE;AAAA;AAAA;AAAA;;AAWhBC,OAAG,aAAH,EAAiB,UAACP,IAAD,EAAQ;AACrBM,eAAO,CAAP,EAASN,IAAT;AACH,KAFD;;AAIAO,OAAG,eAAH,EAAmB,UAACP,IAAD,EAAQ;AACvBM,eAAO,CAAP,EAASN,IAAT;AACH,KAFD;;AAIAQ,QAAI,qBAAJ,EAA0B,UAACR,IAAD,EAAQ;AAC9BM,eAAO,CAAP,EAASN,IAAT;AACH,KAFD;;AAIAO,OAAG,aAAH,EAAiB,UAACP,IAAD,EAAQ;AACrBM,eAAO,CAAP,EAASN,IAAT;AACH,KAFD;;AAIAO,OAAG,eAAH,EAAmB,UAACP,IAAD,EAAQ;AACvBM,eAAO,CAAP,EAASN,IAAT;AACH,KAFD;AAGH,CA9BD","file":"live_server.js","sourcesContent":["/**\r\n * Created by Luky on 2017/7/28.\r\n */\r\nrequire('../../modify_config');\r\nlet live=require('../../../app/servers/ipc_live_server');\r\nlet fs=require('fs');\r\nlet IPCFactory=require('../../../app/servers/ipc_factory');\r\n\r\nconst http = require('http');\r\nconst wOption = {\r\n    flags: 'w',\r\n    encoding: null,\r\n    fd: null,\r\n    mode: 0o666,\r\n    autoClose: true\r\n};\r\n\r\nlet server=http.createServer();\r\nserver.listen(3000);\r\n\r\ndescribe('集成测试',()=>{\r\n\r\n   async function dolive(id,done){\r\n        let ipc=await IPCFactory.getIPC(id)\r\n        let l=new live(server,ipc);\r\n        l.openWSS();\r\n        l.on('close',()=>{\r\n            done();\r\n        });\r\n    }\r\n\r\n    it('大华枪机视频sdk测试',(done)=>{\r\n        dolive(1,done);\r\n    });\r\n\r\n    it('大华枪机视频onvif测试',(done)=>{\r\n        dolive(2,done);\r\n    });\r\n\r\n    xit('hopewell枪机视频onvif测试',(done)=>{\r\n        dolive(3,done);\r\n    });\r\n\r\n    it('大华球机视频sdk测试',(done)=>{\r\n        dolive(4,done);\r\n    });\r\n\r\n    it('大华球机视频onvif测试',(done)=>{\r\n        dolive(5,done);\r\n    });\r\n});"]}