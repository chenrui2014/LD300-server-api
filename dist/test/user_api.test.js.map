{"version":3,"sources":["../../src/test/user_api.test.js"],"names":["request","require","expect","app","describe","it","done","listen","get","end","err","res","console","log","body","data","to","be","an","user","username","age","post","send","set","code","equal"],"mappings":";;AAAA,IAAMA,UAAUC,QAAQ,WAAR,CAAhB;AACA,IAAMC,SAASD,QAAQ,MAAR,EAAgBC,MAA/B;AACA,IAAMC,MAAMF,QAAQ,WAAR,CAAZ;;AAEAG,SAAS,UAAT,EAAqB,YAAM;;AAEvBC,OAAG,SAAH,EAAc,UAACC,IAAD,EAAU;;AAEpBN,gBAAQG,IAAII,MAAJ,EAAR,EACKC,GADL,CACS,yBADT,EACwC;AADxC,SAEKN,MAFL,CAEY,GAFZ,EAEwC;AAFxC,SAGKO,GAHL,CAGS,UAACC,GAAD,EAAMC,GAAN,EAAc;;AAEfC,oBAAQC,GAAR,CAAYF,IAAIG,IAAhB;AACA;AACAZ,mBAAOS,IAAIG,IAAJ,CAASC,IAAhB,EAAsBC,EAAtB,CAAyBC,EAAzB,CAA4BC,EAA5B,CAA+B,QAA/B;;AAEAZ;AACH,SAVL;AAWH,KAbD;;AAeAD,OAAG,cAAH,EAAmB,UAACC,IAAD,EAAU;;AAEzB;AACA,YAAIa,OAAO;AACPC,sBAAU,MADH;AAEPC,iBAAK;AAFE,SAAX;;AAKArB,gBAAQG,IAAII,MAAJ,EAAR,EACKe,IADL,CACU,yBADV,EACgD;AADhD,SAEKC,IAFL,CAEUJ,IAFV,EAEgD;AAFhD,SAGKK,GAHL,CAGS,cAHT,EAGyB,kBAHzB,EAGgD;AAHhD,SAIKtB,MAJL,CAIY,GAJZ,EAIgD;AAJhD,SAKKO,GALL,CAKS,UAACC,GAAD,EAAMC,GAAN,EAAc;;AAEfC,oBAAQC,GAAR,CAAYF,IAAIG,IAAhB;AACA;AACAZ,mBAAOS,IAAIG,IAAJ,CAASW,IAAhB,EAAsBT,EAAtB,CAAyBC,EAAzB,CAA4BS,KAA5B,CAAkC,CAAlC;AACApB;AACH,SAXL;AAYH,KApBD;AAqBH,CAtCD","file":"user_api.test.js","sourcesContent":["const request = require('supertest');\r\nconst expect = require('chai').expect;\r\nconst app = require('../app.js');\r\n\r\ndescribe('user_api', () => {\r\n    \r\n    it('getUser', (done) => {\r\n\r\n        request(app.listen())\r\n            .get('/api/users/getUser?id=1')     //get方法\r\n            .expect(200)                        //断言状态码为200\r\n            .end((err, res) => {\r\n\r\n                console.log(res.body);\r\n                //断言data属性是一个对象\r\n                expect(res.body.data).to.be.an('object');\r\n\r\n                done();\r\n            });\r\n    })\r\n\r\n    it('registerUser', (done) => {\r\n\r\n        // 请求参数，模拟用户对象\r\n        var user = {\r\n            username: '阿，希爸',\r\n            age: 31\r\n        }\r\n\r\n        request(app.listen())\r\n            .post('/api/users/registerUser')            //post方法\r\n            .send(user)                                 //添加请求参数\r\n            .set('Content-Type', 'application/json')    //设置header的Content-Type为json\r\n            .expect(200)                                //断言状态码为200\r\n            .end((err, res) => {\r\n\r\n                console.log(res.body);\r\n                //断言返回的code是0\r\n                expect(res.body.code).to.be.equal(0);\r\n                done();\r\n            })\r\n    })\r\n})"]}