{"version":3,"sources":["../../../src/test/flv/adt2flv.test.js"],"names":["decoder","require","fs","path","ADTS2FLV","describe","t","_in","_out","done","fpath","resolve","fpathwrite","fout","createWriteStream","flags","encoding","fd","mode","autoClose","file","createReadStream","d","pipe","on","it"],"mappings":";;AAAA,IAAMA,UAAQC,QAAQ,gCAAR,CAAd;AACA,IAAMC,KAAKD,QAAQ,IAAR,CAAX;AACA,IAAME,OAAKF,QAAQ,MAAR,CAAX;AACA,IAAMG,WAASH,QAAQ,wBAAR,CAAf;;AAEAI,SAAS,aAAT,EAAuB,YAAI;AACvB,aAASC,CAAT,CAAWC,GAAX,EAAeC,IAAf,EAAoBC,IAApB,EAA0B;AACtB,YAAIC,QAAMP,KAAKQ,OAAL,CAAaJ,GAAb,CAAV;AACA,YAAIK,aAAWT,KAAKQ,OAAL,CAAaH,IAAb,CAAf;AACA,YAAIK,OAAKX,GAAGY,iBAAH,CAAqBF,UAArB,EAAgC;AACrCG,mBAAO,GAD8B;AAErCC,sBAAU,IAF2B;AAGrCC,gBAAI,IAHiC;AAIrCC,kBAAM,GAJ+B;AAKrCC,uBAAW;AAL0B,SAAhC,CAAT;AAOA,YAAIC,OAAKlB,GAAGmB,gBAAH,CAAoBX,KAApB,CAAT;AACA,YAAIY,IAAE,IAAIlB,QAAJ,CAAagB,IAAb,CAAN;AACAE,UAAEC,IAAF,CAAOV,IAAP;AACAA,aAAKW,EAAL,CAAQ,QAAR,EAAiBf,IAAjB;AACH;AACDgB,OAAG,gBAAH,EAAoB,UAAChB,IAAD,EAAS;AACzBH,UAAE,kEAAF,EACI,kEADJ,EAEIG,IAFJ;AAIH,KALD;;AAOAgB,OAAG,aAAH,EAAiB,UAAChB,IAAD,EAAS;AACtBH,UAAE,8CAAF,EACI,kEADJ,EAEIG,IAFJ;AAIH,KALD;AAMH,CA7BD","file":"adt2flv.test.js","sourcesContent":["const decoder=require('../../app/acc/acc_adts_decoder');\r\nconst fs = require('fs');\r\nconst path=require('path');\r\nconst ADTS2FLV=require('../../app/acc/adts2flv');\r\n\r\ndescribe('adtsDecoder',()=>{\r\n    function t(_in,_out,done) {\r\n        let fpath=path.resolve(_in);\r\n        let fpathwrite=path.resolve(_out);\r\n        let fout=fs.createWriteStream(fpathwrite,{\r\n            flags: 'w',\r\n            encoding: null,\r\n            fd: null,\r\n            mode: 0o666,\r\n            autoClose: true\r\n        });\r\n        let file=fs.createReadStream(fpath);\r\n        let d=new ADTS2FLV(file);\r\n        d.pipe(fout);\r\n        fout.on('finish',done);\r\n    }\r\n    it('ffmpeg转换后的acc转',(done)=> {\r\n        t('./test/data/acc2flv/audio_flv_onvif_aac_16000_2aac_adts.test.aac',\r\n            './test/data/acc2flv/audio_flv_onvif_aac_16000_selfbuild.test.flv',\r\n            done\r\n        );\r\n    });\r\n\r\n    it('大华直接返回的acc转',(done)=> {\r\n        t('./test/data/acc2flv/audio_flv_16000.test.aac',\r\n            './test/data/acc2flv/audio_flv_dahua_aac_16000_selfbuild.test.flv',\r\n            done\r\n        );\r\n    });\r\n});"]}