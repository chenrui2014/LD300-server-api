{"version":3,"sources":["../../../src/test/_508/_508.test.js"],"names":["_508PTZ","require","_V508","expect","describe","_508","_v508","before","done","port","auto_close","run","err","equal","it","connect","isConnected","disConnect","console","log","zoomAdd","cmd","equals","Buffer","from","zoomDec","_zoomStop","focusAdd","slice","focusDec","_focusStop","apertureAdd","apertureDec","_apertureStop","_focusAuto","getPoint","xyz","x","y","z","move","_zoomTo","moveToPoint","after","stop"],"mappings":";;;;;;;;;;AAAA;;;;AAIA,IAAMA,UAAQC,QAAQ,0BAAR,CAAd;AACA,IAAMC,QAAMD,QAAQ,SAAR,CAAZ;AACA,IAAME,SAAOF,QAAQ,MAAR,EAAgBE,MAA7B;;AAEAC,SAAS,QAAT,EAAkB,YAAI;AAClB,QAAIC,aAAJ;AAAA,QAASC,cAAT;AACAC,WAAO,UAACC,IAAD,EAAQ;AACXH,eAAK,IAAIL,OAAJ,CAAY,EAACS,MAAK,aAAN,EAAoBC,YAAW,CAA/B,EAAZ,CAAL;AACAJ,gBAAM,IAAIJ,KAAJ,CAAU,aAAV,CAAN;AACAI,cAAMK,GAAN,CAAU,UAACC,GAAD,EAAO;AACbT,mBAAO,CAACS,GAAR,EAAaC,KAAb,CAAmB,IAAnB;AACAL;AACA;AACH,SAJD;AAKH,KARD;;AAUAJ,aAAS,MAAT,EAAgB,YAAI;AAChBU,WAAG,QAAH,6DAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCACFT,KAAKU,OAAL,EADE;;AAAA;AAERZ,mCAAOE,KAAKW,WAAZ,EAAyBH,KAAzB,CAA+B,IAA/B;AAFQ;AAAA,mCAGFR,KAAKY,UAAL,EAHE;;AAAA;AAIRd,mCAAOE,KAAKW,WAAZ,EAAyBH,KAAzB,CAA+B,KAA/B;;AAJQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAZ;AAMH,KAPD;;AASAT,aAAS,SAAT,EAAmB,YAAI;AACnBU,WAAG,OAAH,6DAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AACPI,oCAAQC,GAAR,CAAY,aAAZ;AADO;AAAA,mCAEOd,KAAKe,OAAL,EAFP;;AAAA;AAEHC,+BAFG;;AAGPlB,mCAAOkB,IAAIC,MAAJ,CAAWC,OAAOC,IAAP,CAAY,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAgB,IAAhB,EAAqB,IAArB,EAA0B,IAA1B,EAA+B,IAA/B,EAAoC,IAApC,EAAyC,IAAzC,CAAZ,CAAX,CAAP,EAAgFX,KAAhF,CAAsF,IAAtF;AACA;;AAJO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAX;AAMAC,WAAG,OAAH,6DAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AACPI,oCAAQC,GAAR,CAAY,aAAZ;AADO;AAAA,mCAEOd,KAAKoB,OAAL,EAFP;;AAAA;AAEHJ,+BAFG;;AAGPlB,mCAAOkB,IAAIC,MAAJ,CAAWC,OAAOC,IAAP,CAAY,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAgB,IAAhB,EAAqB,IAArB,EAA0B,IAA1B,EAA+B,IAA/B,EAAoC,IAApC,EAAyC,IAAzC,CAAZ,CAAX,CAAP,EAAgFX,KAAhF,CAAsF,IAAtF;;AAHO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAX;AAKAC,WAAG,QAAH,6DAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AACRI,oCAAQC,GAAR,CAAY,qBAAZ;AADQ;AAAA,mCAEMd,KAAKoB,OAAL,CAAa,IAAb,CAFN;;AAAA;AAEJJ,+BAFI;;AAGRlB,mCAAOkB,IAAIC,MAAJ,CAAWC,OAAOC,IAAP,CAAY,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAgB,IAAhB,EAAqB,IAArB,EAA0B,IAA1B,EAA+B,IAA/B,EAAoC,IAApC,EAAyC,IAAzC,CAAZ,CAAX,CAAP,EAAgFX,KAAhF,CAAsF,IAAtF;;AAHQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAZ;AAKAC,WAAG,YAAH,6DAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AACZI,oCAAQC,GAAR,CAAY,eAAZ;AADY;AAAA,mCAEEd,KAAKqB,SAAL,EAFF;;AAAA;AAERL,+BAFQ;;AAGZlB,mCAAOkB,IAAIC,MAAJ,CAAWC,OAAOC,IAAP,CAAY,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAgB,IAAhB,EAAqB,IAArB,EAA0B,IAA1B,EAA+B,IAA/B,EAAoC,IAApC,EAAyC,IAAzC,CAAZ,CAAX,CAAP,EAAgFX,KAAhF,CAAsF,IAAtF;;AAHY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAhB;AAKAC,WAAG,OAAH,6DAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AACPI,oCAAQC,GAAR,CAAY,cAAZ;AADO;AAAA,mCAEOd,KAAKsB,QAAL,EAFP;;AAAA;AAEHN,+BAFG;;AAGPlB,mCAAOkB,IAAIO,KAAJ,CAAU,CAAV,EAAY,CAAZ,EAAeN,MAAf,CAAsBC,OAAOC,IAAP,CAAY,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAgB,IAAhB,EAAqB,IAArB,CAAZ,CAAtB,CAAP,EAAuEX,KAAvE,CAA6E,IAA7E;;AAHO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAX;AAKAC,WAAG,OAAH,6DAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AACPI,oCAAQC,GAAR,CAAY,cAAZ;AADO;AAAA,mCAEOd,KAAKwB,QAAL,EAFP;;AAAA;AAEHR,+BAFG;;AAGPlB,mCAAOkB,IAAIO,KAAJ,CAAU,CAAV,EAAY,CAAZ,EAAeN,MAAf,CAAsBC,OAAOC,IAAP,CAAY,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAgB,IAAhB,EAAqB,IAArB,CAAZ,CAAtB,CAAP,EAAuEX,KAAvE,CAA6E,IAA7E;;AAHO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAX;AAKAC,WAAG,QAAH,6DAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AACRI,oCAAQC,GAAR,CAAY,sBAAZ;AADQ;AAAA,mCAEMd,KAAKwB,QAAL,CAAc,IAAd,CAFN;;AAAA;AAEJR,+BAFI;;AAGRlB,mCAAOkB,IAAIO,KAAJ,CAAU,CAAV,EAAY,CAAZ,EAAeN,MAAf,CAAsBC,OAAOC,IAAP,CAAY,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAgB,IAAhB,EAAqB,IAArB,CAAZ,CAAtB,CAAP,EAAuEX,KAAvE,CAA6E,IAA7E;;AAHQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAZ;AAKAC,WAAG,OAAH,6DAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AACPI,oCAAQC,GAAR,CAAY,eAAZ;AADO;AAAA,mCAEOd,KAAKyB,UAAL,CAAgB,IAAhB,CAFP;;AAAA;AAEHT,+BAFG;;AAGPlB,mCAAOkB,IAAIC,MAAJ,CAAWC,OAAOC,IAAP,CAAY,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAgB,IAAhB,EAAqB,IAArB,EAA0B,IAA1B,EAA+B,IAA/B,EAAoC,IAApC,EAAyC,IAAzC,CAAZ,CAAX,CAAP,EAAgFX,KAAhF,CAAsF,IAAtF;;AAHO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAX;AAKAC,WAAG,KAAH,6DAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AACLI,oCAAQC,GAAR,CAAY,iBAAZ;AADK;AAAA,mCAESd,KAAK0B,WAAL,EAFT;;AAAA;AAEDV,+BAFC;;AAGLlB,mCAAOkB,IAAIC,MAAJ,CAAWC,OAAOC,IAAP,CAAY,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAgB,IAAhB,EAAqB,IAArB,EAA0B,IAA1B,EAA+B,IAA/B,EAAoC,IAApC,EAAyC,IAAzC,CAAZ,CAAX,CAAP,EAAgFX,KAAhF,CAAsF,IAAtF;;AAHK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAT;AAKAC,WAAG,KAAH,6DAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AACLI,oCAAQC,GAAR,CAAY,iBAAZ;AADK;AAAA,mCAESd,KAAK2B,WAAL,EAFT;;AAAA;AAEDX,+BAFC;;AAGLlB,mCAAOkB,IAAIC,MAAJ,CAAWC,OAAOC,IAAP,CAAY,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAgB,IAAhB,EAAqB,IAArB,EAA0B,IAA1B,EAA+B,IAA/B,EAAoC,IAApC,EAAyC,IAAzC,CAAZ,CAAX,CAAP,EAAgFX,KAAhF,CAAsF,IAAtF;;AAHK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAT;AAKAC,WAAG,MAAH,6DAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AACNI,oCAAQC,GAAR,CAAY,yBAAZ;AADM;AAAA,mCAEQd,KAAK2B,WAAL,CAAiB,IAAjB,CAFR;;AAAA;AAEFX,+BAFE;;AAGNlB,mCAAOkB,IAAIC,MAAJ,CAAWC,OAAOC,IAAP,CAAY,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAgB,IAAhB,EAAqB,IAArB,EAA0B,IAA1B,EAA+B,IAA/B,EAAoC,IAApC,EAAyC,IAAzC,CAAZ,CAAX,CAAP,EAAgFX,KAAhF,CAAsF,IAAtF;;AAHM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAV;AAKAC,WAAG,KAAH,6DAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AACLI,oCAAQC,GAAR,CAAY,kBAAZ;AADK;AAAA,mCAESd,KAAK4B,aAAL,CAAmB,IAAnB,CAFT;;AAAA;AAEDZ,+BAFC;;AAGLlB,mCAAOkB,IAAIC,MAAJ,CAAWC,OAAOC,IAAP,CAAY,CAAC,IAAD,EAAM,IAAN,EAAW,IAAX,EAAgB,IAAhB,EAAqB,IAArB,EAA0B,IAA1B,EAA+B,IAA/B,EAAoC,IAApC,EAAyC,IAAzC,CAAZ,CAAX,CAAP,EAAgFX,KAAhF,CAAsF,IAAtF;;AAHK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAT;AAKAC,WAAG,SAAH,6DAAa;AAAA;AAAA;AAAA;AAAA;AACTI,oCAAQC,GAAR,CAAY,gBAAZ;AADS;AAAA,mCAEHd,KAAK6B,UAAL,EAFG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAb;AAIH,KAlED;;AAoEA9B,aAAS,MAAT,EAAgB,YAAI;;AAEhBU,WAAG,MAAH,6DAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AACNI,oCAAQC,GAAR,CAAY,cAAZ;AADM;AAAA,mCAEQd,KAAK8B,QAAL,EAFR;;AAAA;AAEFC,+BAFE;;AAGNlB,oCAAQC,GAAR,QAAiBiB,IAAIC,CAArB,WAA4BD,IAAIE,CAAhC,WAAuCF,IAAIG,CAA3C;;AAHM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAV;AAKA;AACAzB,WAAG,QAAH,6DAAY;AAAA;AAAA;AAAA;AAAA;AACRI,oCAAQC,GAAR,CAAY,UAAZ;AADQ;AAAA,mCAEFd,KAAKmC,IAAL,CAAU,CAAV,CAFE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAZ;AAIA1B,WAAG,QAAH,6DAAY;AAAA;AAAA;AAAA;AAAA;AACRI,oCAAQC,GAAR,CAAY,UAAZ;AADQ;AAAA,mCAEFd,KAAKmC,IAAL,CAAU,CAAV,CAFE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAZ;AAIA1B,WAAG,QAAH,6DAAY;AAAA;AAAA;AAAA;AAAA;AACRI,oCAAQC,GAAR,CAAY,UAAZ;AADQ;AAAA,mCAEFd,KAAKmC,IAAL,CAAU,CAAV,CAFE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAZ;AAIA1B,WAAG,QAAH,6DAAY;AAAA;AAAA;AAAA;AAAA;AACRI,oCAAQC,GAAR,CAAY,UAAZ;AADQ;AAAA,mCAEFd,KAAKmC,IAAL,CAAU,CAAV,CAFE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAZ;AAIA1B,WAAG,aAAH,6DAAiB;AAAA;AAAA;AAAA;AAAA;AACbI,oCAAQC,GAAR,CAAY,kBAAZ;AADa;AAAA,mCAEPd,KAAKmC,IAAL,CAAU,CAAV,EAAY,IAAZ,CAFO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAjB;AAIA1B,WAAG,WAAH,6DAAe;AAAA;AAAA;AAAA;AAAA;AACXI,oCAAQC,GAAR,CAAY,aAAZ;AADW;AAAA,mCAELd,KAAKoC,OAAL,CAAa,GAAb,CAFK;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAf;AAIA3B,WAAG,WAAH,6DAAe;AAAA;AAAA;AAAA;AAAA;AACXI,oCAAQC,GAAR,CAAY,iBAAZ;AADW;AAAA,mCAELd,KAAKqC,WAAL,CAAiB,CAAjB,EAAmB,CAAnB,EAAqB,CAArB,CAFK;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAf;AAIH,KApCD;;AAsCAC,UAAM,UAACnC,IAAD,EAAQ;AACVF,cAAMsC,IAAN,CAAWpC,IAAX;AACH,KAFD;AAGH,CAlID","file":"_508.test.js","sourcesContent":["/**\r\n * Created by Luky on 2017/7/11.\r\n */\r\n\r\nconst _508PTZ=require('../../ipcs/_508/_508_ptz');\r\nconst _V508=require('./v_508');\r\nconst expect=require('chai').expect;\r\n\r\ndescribe('基础代码测试',()=>{\r\n    let _508,_v508;\r\n    before((done)=>{\r\n        _508=new _508PTZ({port:'\\\\\\\\.\\\\COM1',auto_close:0});\r\n        _v508=new _V508('\\\\\\\\.\\\\COM2');\r\n        _v508.run((err)=>{\r\n            expect(!err).equal(true);\r\n            done();\r\n            //_v508.stop(done);\r\n        });\r\n    });\r\n\r\n    describe('链接测试',()=>{\r\n        it('连接关闭设备',async ()=>{\r\n            await _508.connect();\r\n            expect(_508.isConnected).equal(true);\r\n            await _508.disConnect();\r\n            expect(_508.isConnected).equal(false);\r\n        });\r\n    });\r\n\r\n    describe('镜头功能性测试',()=>{\r\n        it('变焦测试+',async ()=>{\r\n            console.log('测试命令zoomAdd');\r\n            let cmd=await _508.zoomAdd();\r\n            expect(cmd.equals(Buffer.from([0xa2,0x00,0x09,0x56,0x41,0x00,0x00,0xBC,0xAF]))).equal(true);\r\n            //a20009564100bcaf\r\n        });\r\n        it('变焦测试-',async ()=>{\r\n            console.log('测试命令zoomDec');\r\n            let cmd=await _508.zoomDec();\r\n            expect(cmd.equals(Buffer.from([0xa2,0x00,0x09,0x56,0x4d,0x00,0x00,0xB0,0xAF]))).equal(true);\r\n        });\r\n        it('变焦测试-=',async ()=>{\r\n            console.log('测试命令zoomDec-ptzStop');\r\n            let cmd=await _508.zoomDec(true);\r\n            expect(cmd.equals(Buffer.from([0xa2,0x00,0x09,0x56,0x4d,0x00,0x00,0xB0,0xAF]))).equal(true);\r\n        });\r\n        it('变焦测试=，返回z值',async ()=>{\r\n            console.log('测试命令_zoomStop');\r\n            let cmd=await _508._zoomStop();\r\n            expect(cmd.equals(Buffer.from([0xa2,0x00,0x09,0x56,0x53,0x00,0x00,0xAE,0xAF]))).equal(true);\r\n        });\r\n        it('聚焦测试+',async ()=>{\r\n            console.log('测试命令focusAdd');\r\n            let cmd=await _508.focusAdd();\r\n            expect(cmd.slice(0,5).equals(Buffer.from([0xa2,0x00,0x09,0x46,0x41]))).equal(true);\r\n        });\r\n        it('聚焦测试-',async ()=>{\r\n            console.log('测试命令focusDec');\r\n            let cmd=await _508.focusDec();\r\n            expect(cmd.slice(0,5).equals(Buffer.from([0xa2,0x00,0x09,0x46,0x4D]))).equal(true);\r\n        });\r\n        it('聚焦测试-=',async ()=>{\r\n            console.log('测试命令focusDec-ptzStop');\r\n            let cmd=await _508.focusDec(true);\r\n            expect(cmd.slice(0,5).equals(Buffer.from([0xa2,0x00,0x09,0x46,0x4D]))).equal(true);\r\n        });\r\n        it('聚焦测试=',async ()=>{\r\n            console.log('测试命令focusStop');\r\n            let cmd=await _508._focusStop(true);\r\n            expect(cmd.equals(Buffer.from([0xa2,0x00,0x09,0x46,0x53,0x00,0x00,0xBE,0xAF]))).equal(true);\r\n        });\r\n        it('光圈+',async ()=>{\r\n            console.log('测试命令apertureAdd');\r\n            let cmd=await _508.apertureAdd();\r\n            expect(cmd.equals(Buffer.from([0xa2,0x00,0x09,0x49,0x41,0x00,0x00,0xA3,0xAF]))).equal(true);\r\n        });\r\n        it('光圈-',async ()=>{\r\n            console.log('测试命令apertureDec');\r\n            let cmd=await _508.apertureDec();\r\n            expect(cmd.equals(Buffer.from([0xa2,0x00,0x09,0x49,0x4d,0x00,0x00,0xAF,0xAF]))).equal(true);\r\n        });\r\n        it('光圈-=',async ()=>{\r\n            console.log('测试命令apertureDec-ptzStop');\r\n            let cmd=await _508.apertureDec(true);\r\n            expect(cmd.equals(Buffer.from([0xa2,0x00,0x09,0x49,0x4d,0x00,0x00,0xAF,0xAF]))).equal(true);\r\n        });\r\n        it('光圈=',async ()=>{\r\n            console.log('测试命令apertureStop');\r\n            let cmd=await _508._apertureStop(true);\r\n            expect(cmd.equals(Buffer.from([0xa2,0x00,0x09,0x49,0x53,0x00,0x00,0xB1,0xAF]))).equal(true);\r\n        });\r\n        it('自动聚焦测试+',async ()=>{\r\n            console.log('测试命令_focusAuto');\r\n            await _508._focusAuto();\r\n        });\r\n    });\r\n\r\n    describe('转台功能',()=>{\r\n\r\n        it('查询位置',async ()=>{\r\n            console.log('测试命令getPoint');\r\n            let xyz=await _508.getPoint();\r\n            console.log(`x:${xyz.x},y:${xyz.y},z:${xyz.z}`);\r\n        });\r\n        //'top':1,'down':2,'left':4,'right':8,\r\n        it('转台移动-左',async ()=>{\r\n            console.log('测试命令move');\r\n            await _508.move(4);\r\n        });\r\n        it('转台移动-右',async ()=>{\r\n            console.log('测试命令move');\r\n            await _508.move(8);\r\n        });\r\n        it('转台移动-上',async ()=>{\r\n            console.log('测试命令move');\r\n            await _508.move(1);\r\n        });\r\n        it('转台移动-下',async ()=>{\r\n            console.log('测试命令move');\r\n            await _508.move(2);\r\n        });\r\n        it('转台移动-右-停止移动',async ()=>{\r\n            console.log('测试命令move-ptzStop');\r\n            await _508.move(4,true);\r\n        });\r\n        it('变焦到指定尺寸测试',async ()=>{\r\n            console.log('测试命令_zoomTo');\r\n            await _508._zoomTo(100);\r\n        });\r\n        it('转台转动到指定位置',async ()=>{\r\n            console.log('测试命令moveToPoint');\r\n            await _508.moveToPoint(1,1,1);\r\n        });\r\n    });\r\n\r\n    after((done)=>{\r\n        _v508.stop(done);\r\n    });\r\n});"]}