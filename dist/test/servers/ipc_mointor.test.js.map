{"version":3,"sources":["../../../src/test/servers/ipc_mointor.test.js"],"names":["require","db","file","M","expect","data","id","point","demo","preset","describe","dbInstance","before","mt","_setMointor","m","_mointors","it","equal","m5","range","points","length","mx","getMointors","mx0","x"],"mappings":"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","file":"ipc_mointor.test.js","sourcesContent":["const {db,file}=require('../init');\r\nconst M=require('../../servers/ipc_mointors');\r\nconst expect=require('chai').expect;\r\n\r\nlet data=[\r\n    {\r\n        id:5,//ipcid\r\n        point:700,//距离\r\n        demo:true,//是否球机\r\n        preset:{\"x\":1,\"y\":1,\"z\":1,preset:'1'}//球机预置点信息\r\n    },\r\n    {\r\n        id:5,//ipcid\r\n        point:900,//距离\r\n        demo:true,//是否球机\r\n        preset:{\"x\":16,\"y\":1,\"z\":1,preset:'1'}//球机预置点信息\r\n    },\r\n    {\r\n        id:5,//ipcid\r\n        point:800,//距离\r\n        demo:true,//是否球机\r\n        preset:{\"x\":10,\"y\":1,\"z\":1,preset:'2'}//球机预置点信息\r\n    },\r\n    {\r\n        id:2,\r\n        point:780,\r\n        demo:false\r\n    },\r\n    {\r\n        id:2,\r\n        point:790,\r\n        demo:false\r\n    }\r\n];\r\n\r\ndescribe('监控测试',()=>{\r\n    let dbInstance=null;\r\n    before(async ()=>{\r\n        //打开注释启动数据库取数据\r\n        dbInstance=await file();\r\n    });\r\n\r\n    let mt=new M(1);\r\n    mt._setMointor(data);\r\n    let m=mt._mointors;\r\n    it('测试数据初始化',()=>{\r\n        expect(!m['5']).equal(false);\r\n        expect(!m['2']).equal(false);\r\n        let m5=m['5'];\r\n        expect(m5.range[0]).equal(700);\r\n        expect(m5.range[1]).equal(900);\r\n        expect(m5.points.length).equal(3);\r\n        expect(m5.points[0].point).equal(m5.range[0]);\r\n        expect(m5.points[1].point).equal(800);\r\n        expect(m5.points[2].point).equal(m5.range[1]);\r\n        expect(m5.id).equal(5);\r\n        expect(m5.demo).equal(true);\r\n    });\r\n\r\n    it('范围划定--左',()=>{\r\n        let mx=mt.getMointors(700);\r\n        expect(mx.length).equal(1);\r\n        let mx0=mx[0];\r\n        expect(mx0.id).equal(5);\r\n        expect(mx0.x).equal(1);\r\n    });\r\n\r\n    it('范围划定-右',()=>{\r\n        let mx=mt.getMointors(800);\r\n        expect(mx.length).equal(1);\r\n        let mx0=mx[0];\r\n        expect(mx0.id).equal(5);\r\n        expect(mx0.x).equal(10);\r\n    });\r\n\r\n    it('球机插值位置计算-中',()=>{\r\n        let mx=mt.getMointors(750);\r\n        expect(mx.length).equal(1);\r\n        let mx0=mx[0];\r\n        expect(mx0.id).equal(5);\r\n        expect(mx0.x>1).equal(true);\r\n        expect(mx0.x<10).equal(true);\r\n    });\r\n\r\n\r\n});"]}